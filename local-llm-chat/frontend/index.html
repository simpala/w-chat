<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8"/>
    <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
    <title>Local LLM Chat</title>
    <link href="/src/style.css" rel="stylesheet"/>

    <link rel="stylesheet" href="/highlight.js/styles/github-dark.css">

    <script src="/marked.min.js"></script>
    <script src="/highlight.js/highlight.min.js"></script>
    <script src="/mermaid.min.js"></script>

    <script>
        console.log("DEBUG_INLINE: 'marked' type directly after script tag:", typeof marked);
    </script>
    <script>

        function scrollToBottom() {
            const chatWindow = document.querySelector('.messages-container');
            if (chatWindow) {
                chatWindow.scrollTop = chatWindow.scrollHeight;
            }
        }
    </script>
</head>
<body>
    <div class="settings-toggle-container">
        <button id="settingsToggleButton" title="Toggle Settings Pane">‚öôÔ∏è</button>
        <button id="mcpManagerButton" title="MCP Manager">üåê</button>
    </div>
    <div class="container">
        <div class="sidebar-container">
            <button id="newChatButton">New Chat</button>
            <p class="italic-small">ctrl + left mouse click to delete</p>
            <div id="chatSessionList">
                </div>
        </div>
        <div class="chat-area">
            <div class="chat-header">
                <div class="custom-select">
                    <input type="text" id="systemPromptSelectInput" placeholder="Select Prompt...">
                    <input type="hidden" id="selectedSystemPrompt">
                    <div id="systemPromptSelectList" class="select-items select-hide"></div>
                </div>
                <textarea id="customSystemPrompt" placeholder="System Prompt Content..." readonly></textarea>
            </div>
            <div class="messages-container">
            </div>
            <div class="input-area">
                <textarea id="messageInput" placeholder="Type your message..."></textarea>
                <input accept="image/*,video/*" id="fileUploadInput" style="display: none;" type="file"/>
                <button id="uploadArtifactButton" title="Upload File">üìé</button>
                <button id="sendButton">Send</button>
                <button id="stopButton" style="display: none;">Stop</button>
            </div>
        </div>
        <div class="artifacts-panel" id="artifactsPanel">
            <div class="resize-handle"></div> <div class="artifacts-header">
                <h3>Artifacts</h3>
                <button id="toggleArtifactsPanel">Toggle</button>
            </div>
            <div class="artifacts-content" id="artifactsContent">
                </div>
        </div>
        <div class="sidebar-container right sidebar-hidden">
            <!-- Wrapper div for main settings content - this will now grow and scroll -->
            <div class="sidebar-content-wrapper">
                <input id="llamaPathInput" placeholder="Llama.cpp directory" type="text">
                <input id="modelPathInput" placeholder="Model Folder Path" type="text"/>
                <div class="custom-select">
                    <input type="text" id="chatModelSelectInput" placeholder="Select Model...">
                    <input type="hidden" id="selectedModelPath">
                    <div id="chatModelSelectList" class="select-items select-hide"></div>
                </div>
                <textarea id="chatModelArgs" placeholder="Chat Model Arguments..."></textarea>
                <button id="launchLLMButton">Launch LLM Model</button>

                <div class="speculative-element">
                    <div class="margin-bottom">
                        <label for="speculativeMainModelSelect">-m:</label>
                        <select id="speculativeMainModelSelect"></select>
                    </div>
                    <div class="margin-bottom">
                        <label for="speculativeDraftModelSelect">-md:</label>
                        <select id="speculativeDraftModelSelect"></select>
                    </div>
                    <textarea id="speculativeModelArgs" placeholder="Speculative Model Arguments..."></textarea>
                    <button id="launchSpeculativeButton">Launch Speculative Model</button>
                </div>
            </div> <!-- End sidebar-content-wrapper -->

            <!-- Custom Theme Selector - MOVED OUTSIDE THE WRAPPER, DIRECT CHILD OF sidebar-container right -->
            <!-- Added margin-bottom-adjusted class for bottom padding -->
            <div class="custom-select margin-bottom-adjusted">
                <input type="text" id="themeSelectInput" placeholder="Select Theme...">
                <input type="hidden" id="selectedThemeValue">
                <div id="themeSelectList" class="select-items select-hide">
                    <div data-value="default">Default Theme</div>
                    <div data-value="dark-blue">Dark Blue</div>
                    <div data-value="light">Light Theme</div>
                    <div data-value="green">Green Theme</div>
                    <div data-value="grey">Grey Theme</div>
                    <!-- Add more themes here if you define them in style.css -->
                </div>
            </div>

        </div>
    </div>
    <script src="src/app.js" type="module"></script>
</body>
</html>
